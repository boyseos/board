<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.board.web.board.BoardRepository">
	<select id="getPage" parameterType="hashMap" resultType="BoardModel">
		SELECT *
		FROM board
		<trim prefix="WHERE (" prefixOverrides="OR | AND">
			<foreach item="item" index="index" collection="boardKinds"
				open="OR boardKind like " separator="OR boardKind like " close=")" >
				${item}
			</foreach>
		</trim>
		<if test="searchType!=null and searchWord!=null">
			AND ${searchType} like '%${searchWord}%'
		</if>
		ORDER BY `boardSeq` DESC LIMIT #{startRow} , #{rowLimit}
	</select>
	<select id="boardCount" resultType="int">
		SELECT count(boardSeq)
		from board
		<trim prefix="WHERE (" prefixOverrides="OR | AND">
			<foreach item="item" index="index" collection="boardKinds"
				open="OR boardKind like " separator="OR boardKind like " close=")">
				${item}
			</foreach>
		</trim>
		<if test="searchType!=null and searchWord!=null">
			AND ${searchType} like '%${searchWord}%'
		</if>
	</select>
	<update id="boardViewCountUp">
		UPDATE board
		SET boardViewCount = boardViewCount + 1
		Where boardSeq = #{seq}	
	</update>
	<select id="findByBoardSeq" resultType="BoardModel">
		SELECT *
		FROM board
		Where boardSeq = #{seq}
	</select>
	<update id="updateByBoardSeq" parameterType="BoardModel">
		UPDATE board
		SET boardTitle = #{boardTitle},
			boardWriter = #{boardWriter},
			boardContent = #{boardContent}
		Where boardSeq = #{boardSeq}
	</update>
	<insert id="insertBoard" parameterType="BoardModel">
		INSERT INTO `board`
			(`boardContent`, `boardTitle`, `boardWriter`,`boardDate`)
			VALUES (#{boardContent},#{boardTitle},#{boardWriter},NOW());
	</insert>
</mapper>